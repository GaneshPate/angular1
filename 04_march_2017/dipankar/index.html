<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
      <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-route.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body ng-app="myApp">
<a href="#product">Product</a> | <a href="#category">category</a> | <a href="#contact">Contact</a> | <a href="#feedback">Feedback</a>
	<div ng-view></div>

</body>
<script type="text/javascript">
	var app= angular.module("myApp",['ngRoute']);
	app.config(['$routeProvider',function($routeProvider){
		$routeProvider
		.when('/product',{
			templateUrl:'product.html',
			controller:'ProductController'
		})
		.when('/category',{
			templateUrl:'category.html',
			controller:'CategoryController'
		})
		.when('/contact',{
			templateUrl:'contact.html',
			controller:'ContactController'
		})
		.when('/feedback',{
			templateUrl:'feedback.html',
			controller:'FeedbackController'
		})
		.when("/addProduct",{
			templateUrl:'addProduct.html',
			controller:'AddProductController'
		})
		.when("/editProduct/:id",{
			templateUrl:'addProduct.html',
			controller:'AddProductController'
		})
		.when('/addContact',{
			templateUrl:'addContact.html',
			controller:'AddContactController'
		})
		.when('/editContact/:id',{
			templateUrl:'addContact.html',
			controller:'AddContactController'
		})
		.when('/addFeedback',{
			templateUrl:'addFeedback.html',
			controller:'AddFeedbackController'
		})
		.when('/',{
			templateUrl:'product.html',
			controller:'ProductController'
		})

	}]);

app.run(function($rootScope){

	$rootScope.products = [{id:1,name:'test',category:'shirt',image:'1.txt'}];
	$rootScope.contacts=[{id:1,name:'dipankar', mobile:'9739353220', email:'dipankar@divrt.co'}];
	$rootScope.feedbacks=[];
})


    app.controller("AddProductController",function($scope,$rootScope,$location,$routeParams){
	
	var id=$routeParams.id;console.log(id);
	if(id){
		for(i=0;i<$rootScope.products.length;i++)
		{
			if($rootScope.products[i].id == id)
			{
				$scope.product = $rootScope.products[i];
			}
		}
		$scope.btn_stt=true;
	}
	else{
		$scope.btn_stt=false;
	}
 	$scope.add=function(){
 			
			$rootScope.products.push($scope.product);
			console.log($rootScope.products);
			$location.path('/product');
	}
	$scope.updateProduct=function(product){
		console.log("id is"+product.id);
		for(i=0;i<$rootScope.products.length;i++){
			if($rootScope.products[i].id==product.id){
				$rootScope.products[i].id=product.id;
				$rootScope.products[i].name=product.name;
				$rootScope.products[i].category=product.category;
				$rootScope.products[i].image=product.image;
			}
		}
		$location.path('/product');
	}
	


	});

	//    app.controller("EditProductController",function($scope,$rootScope,$location,$rootParams){
	
	
 	


	// });
	

	app.controller("ProductController",function($scope,$rootScope,$location){
		$scope.products = $rootScope.products;
		$scope.deleteProduct=function(x){console.log(x);
		$rootScope.products.splice(x,1);
	}
	$scope.editProduct=function(x){
		console.log(x.id);
		
		$location.path('/editProduct/'+x.id);
	}
		
	});
	app.controller("CategoryController",function($scope,$rootScope,$location){
		$scope.contacts=$rootScope.contacts;

	});
	app.controller("ContactController",function($scope,$location,$rootScope){
		$scope.editContact=function(x){
			console.log(x.id);
			$location.path('/editContact/'+x.id);
		}
		$scope.deleteContact=function(x){
			$rootScope.contacts.splice(x,1);
		}
	});
	app.controller("AddContactController",function($scope,$rootScope,$location,$routeParams){
		console.log("this is it"+$routeParams.id);
		var id=$routeParams.id;
		if(id){
			for(i=0;i<$rootScope.contacts.length;i++)
			{
				if($rootScope.contacts[i].id==$routeParams.id){
					console.log("this is it");
					$scope.contact=$rootScope.contacts[i];
					$scope.btn_contact=true;
					$scope.contactid=true;
				}
				else{
					$scope.btn_contact=false;
					$scope.contactid=false;
				}
			}
		}
		$scope.add=function(){
			$rootScope.contacts.push($scope.contact);
			$location.path('/contact');
		}
		$scope.updateContact=function(x){
			for(i=0;i<$rootScope.contacts.length;i++){
				if($rootScope.contacts[i].id==x.id){
					$rootScope.contacts[i]=x;
					$location.path('/contact');
				}
			}
		}
	});
	app.controller("FeedbackController",function($scope,$rootScope,$location){
		$scope.feedback=$rootScope.feedbacks;
		$scope.deleteFeedback=function(x){
			$rootScope.feedbacks.splice(x,1);
		}

	});
	app.controller("AddFeedbackController",function($scope,$rootScope,$location){
		$scope.add=function(){
			$rootScope.feedbacks.push($scope.feedback);
			$location.path('/feedback');
		}
	})

</script>
</html>